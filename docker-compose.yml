services:
  app:
    build: .
    container_name: fastapi_app
    ports:
      - "8000:8000"
    env_file:
      - ./.env
    volumes:
      # CORREÇÃO AQUI: Adicionado o caminho "Desenvolvimento/"
      - ./Desenvolvimento/backend:/app
    depends_on:
      - db

  # Serviço do nosso banco de dados MySQL
  db:
    image: mysql:8.0 # Usa uma imagem oficial do MySQL
    container_name: mysql_db # Nome do contêiner
    ports:
      - "3307:3306" # Mapeia a porta 3306 do contêiner para a 3307 da sua máquina
                    # Usamos 3307 para não conflitar com uma possível instalação local do MySQL
    environment:
      # Variáveis de ambiente para configurar o MySQL na primeira inicialização
      MYSQL_ROOT_PASSWORD: rootpassword # Senha do usuário root
      MYSQL_DATABASE: expenses_db # Cria um banco de dados com este nome
      MYSQL_USER: user # Cria um usuário
      MYSQL_PASSWORD: password # Define a senha para este usuário
    volumes:
      - mysql_data:/var/lib/mysql # Persiste os dados do banco em um volume Docker
                                  # Mesmo que o contêiner seja removido, os dados não serão perdidos

volumes:
  mysql_data: # Define o volume nomeado para persistência dos dados